<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tidelands 2100</title>
    <!-- Add Google Font import for Space Mono -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.typekit.net/bcb1fcz.css">
    <style>
        @font-face {
            font-family: 'Inclusive Sans';
            src: url('fonts/inclusive-sans-regular.woff2') format('woff2'),
                 url('fonts/inclusive-sans-regular.woff') format('woff');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            /* Remove the default font-family from here */
        }

        /* Apply font families to specific elements */
        body {
            overflow: hidden;
            height: 100vh;
            font-family: 'Inclusive Sans', sans-serif; /* Default body text font */
            cursor: none; /* Hide default cursor */
        }

        /* Apply Space Mono to headers and buttons */
        h1, h2, h3, h4, h5, h6,
        .accordion-header,
        .info-button,
        .title {
            font-family: 'Space Mono', monospace;
        }

        .container {
            display: flex;
            height: calc(100vh - 50px); /* Adjusted to make room for shorter bottom bar */
            overflow: hidden;
            position: relative;
        }

        .left-half {
            width: 50%;
            height: 100%;
            position: relative;
            overflow: hidden;
            border-right: 1px solid #0900BA;
        }

        .image-sequence {
            height: 100%;
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .image-sequence img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: none;
        }

        .title {
            position: absolute;
            top: 0;
            left: 0;
            color: #0900BA;
            font-size: 20px;
            z-index: 2500;
            background-color: #E6E7E8;
            outline: 1px solid #0900BA;
            padding: 10px 15px;
            }

        .right-half {
            width: 50%;
            height: 100%;
            background-color: #D1D3D4;
            overflow: hidden;
            position: relative;
        }

        .accordion {
            width: 100%;
            position: relative;
        }

        .accordion-item {
            width: 100%;
            transition: transform 0.5s ease;
            position: absolute;
            left: 0;
            outline: 1px solid #0900BA;
        }

        .accordion-header {
            height: 100px;
            z-index: 100;
            background-color: #e9e9e9;
            color: black;
            display: flex;
            align-items: center;
            padding: 0 20px;
            font-size: 25px;
            font-weight: normal;
            position: relative;
            z-index: 10; /* Ensure headers are always above content */
        }

        .accordion-header:hover {
            background: #c3ff00;
            outline: 1px solid
        }

        .accordion-content {
            background-color: #e9e9e9;
            max-height: 0;
            overflow-y: auto;
            transition: max-height 0.5s ease;
            position: relative;
            z-index: 5; /* Content sits below headers */
        }

        .content-inner {
            padding: 20px;
        }

        .content-inner h2 {
            margin-bottom: 15px;
        }

        .content-inner p {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .content-inner img {
            max-width: 100%;
            height: auto;
            margin: 15px 0;
        }

        .accordion-item.active .accordion-content {
            max-height: calc(100vh - 300px); /* Adjusted for 100px header height and 50px bottom bar */
            overflow-y: auto;
        }

        /* Bottom Bar Styles */
        .bottom-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 50px;
            background-color: #e9e9e9;
            border-top: 1px solid #0900BA;
            display: flex;
            align-items: center;
            padding: 0 20px;
            z-index: 10000;
        }

        .info-button {
            color: #0900BA;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 1px solid #0900BA;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            background-color: white;
            font-weight: normal;
            font-size: 20px;
        }

        .info-button.active {
            background-color: #0900BA;
            color: white;
        }

        .info-button:hover {
            background-color: #c3ff00; /* Same hover color as accordion headers */
            color: #0900BA;
            border-color: transparent;
            box-shadow: 1px 1px 5px black;
                        transition: all 0.2s ease;

        }

        .divider {
            height: 60%;
            width: 1px;
            background-color: black;
            margin: 0 20px;
        }

        .timeline-container {
            flex-grow: 1;
            height: 12px;
            border: 1px solid black;
            background-color: #f0f0f0;
            position: relative;
            overflow: hidden;
        }

        .timeline-progress {
            height: 100%;
            width: 0%; /* Will be updated via JS */
            background: linear-gradient(to right, #c3ff00, #0000ff);
            transition: width 0.3s ease;
        }

        /* Overlay and Modal Styles */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            display: none;
            overflow-y: auto;
            padding: 90px 0;
        }

        .info-modal {
            position: relative;
            width: 80%;
            max-width: 900px;
            margin: 0 auto;
            background-color: white;
            border: 1px solid black;
            border-radius: 5px;
            z-index: 2001;
            display: none;
        }

        .info-content {
            padding: 30px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
        }

        .info-section {
            margin-bottom: 40px;
        }

        /* Center titles in info-modal */
        .info-modal .info-section h2 {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ddd;
            text-align: center;
            font-weight: normal;
        }

        /* Team grid for desktop (3 columns) */
        .team-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        /* Team member styling */
        .team-member {
            text-align: left;
        }

        .team-member p {
            margin-bottom: 15px;
        }

        .team-image {
            width: 100%;
            padding-bottom: 100%; /* Creates a square aspect ratio */
            position: relative;
            overflow: hidden;
        }

        .team-image img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Contact section */
        .contact-divider {
            height: 1px;
            background-color: #ddd;
            margin: 20px 0;
        }

        .contact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            text-align: left;
        }

        .contact-column a {
            color: #000000;
            text-decoration: none;
            font-weight: normal;
            font-size: 16px;
        }

        .contact-column p {
            color: #4f4f4f;
            text-decoration: none;
            font-weight: normal;
            font-size: small;
        }

        .contact-column a:hover {
            text-decoration: underline;
        }

        .info-section p {
            line-height: 1.6;
            margin-bottom: 15px;
        }
        .top-gradient {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 35%;
            background: linear-gradient(to bottom, rgba(197, 255, 25, 0.935), transparent);
            z-index: 50; /* Above images but below title */
            pointer-events: none; /* Allow interaction with elements below */
        }

        .bottom-gradient {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 25%;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.47), transparent);
            z-index: 50; /* Above images but below title */
            pointer-events: none; /* Allow interaction with elements below */
        }
            .crosshair {
            position: fixed;
            top: 0;
            left: 0;
            pointer-events: none;
            z-index: 9999;
            mix-blend-mode: difference;
        }

            .vertical,
            .horizontal {
            position: fixed;
            background: white;
        }

            .vertical {
            width: 1px;
            height: 100vh;
        }

            .horizontal {
            height: 1px;
            width: 100vw;
        }

            .dot {
            position: fixed;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: white;
            transform: translate(-50%, -50%);
        }
        @media (min-width: 769px) {
            .right-half {
            background-image: url('images/dither-animation-wide.gif');
            background-size: 100% auto;
            background-repeat: no-repeat;
            background-position: center calc(100% + 20px);
            }
        }
        @media (max-width: 768px) {
        /* Fixed viewport layout - no scrolling */
        body, html {
            overflow: hidden;
            height: 100%;
            position: fixed;
            width: 100%;
            cursor: auto;
        }
        .crosshair {
            display: none; /* Hide crosshair elements on mobile */
        }
        /* Container takes full viewport */
        .container {
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
            position: relative;
            padding-top: 50px;
        }
        .right-half::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 70%;
            background: linear-gradient(to bottom, 
                        rgba(197, 255, 25, 0) 0%, /* Start transparent at the top */
                        rgba(0, 0, 0, 0.339) 50%, /* Full color starts lower down */
                        transparent 100%); /* Fade to transparent at the bottom */
            z-index: 5; /* Above background image but below content */
            pointer-events: none; /* Allow interaction with elements below */
        }
        
        .right-half::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 25%;
            background: linear-gradient(to top, rgb(197, 255, 25, 0.935), transparent);
            z-index: 5; /* Above background image but below content */
            pointer-events: none; /* Allow interaction with elements below */
        }
        
        /* Fixed title bar at top */
        .title {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            z-index: 2500;
            height: 50px;
            background-color: #E6E7E8;
            outline: 1px solid #0900BA;
            color: #0900BA; /* Ensure text is visible */
            -webkit-transform: translateZ(0);
        }
        
        /* Move info button into title bar */
        .info-button {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #0900BA;
            background-color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 1px solid #0900BA;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-weight: normal;
            font-size: 20px;
        }
        
        /* Hide bottom bar */
        .bottom-bar {
            display: none;
        }
        
        /* Hide left-half completely */
        .left-half {
            display: none;
        }
        
        /* Right-half takes full width and height */
        .right-half {
            position: absolute;
            top: 50px;
            left: 0;
            width: 100%;
            height: calc(100vh - 50px); /* Full remaining height */
            z-index: 10;
            background-image: url('images/background.gif'); /* Replace with your image path */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            overflow: hidden;
        }
        
        /* Accordion takes full width/height of container */
        .accordion {
            width: 100%;
            height: 100%;
            position: relative;
            z-index: 50;
        }
        
        /* Accordion items are positioned absolutely with transitions */
        .accordion-item {
            width: 100%;
            position: absolute;
            left: 0;
            transition: top 0.5s ease;
            -webkit-overflow-scrolling: touch;
        }
        
        /* Header styling */
        .accordion-header {
            height: 60px;
            background-color: #e9e9e9;
            outline: 1px solid #0900BA;
            display: flex;
            align-items: center;
            padding: 0 20px;
            font-size: 30px;
            z-index: 10;
        }
        
        .accordion-header:hover {
            background-color: #c3ff00;
        }
        
        /* Content area styling */
        .accordion-content {
            background-color: #e9e9e9;
            max-height: 0;
            overflow-y: auto;
            transition: max-height 0.5s ease;
            z-index: 5;
        }
        
        /* Ensure solid background for content */
        .content-inner {
            background-color: #e9e9e9;
            padding: 20px;
        }
        
        /* Modal adjustments for mobile */
        .overlay {
            z-index: 2000;
            overflow-y: scroll;
        }
        
        .info-modal {
            position: relative;
            width: 95%;
            margin: 0 auto;
            background-color: white;
            border: 1px solid black;
            border-radius: 5px;
            z-index: 2001;
            display: none;
            max-height: none; /* Remove any max-height constraint */
            height: auto; /* Let it expand to fit content */
            overflow: visible; /* Don't constrain content */
        }
        
        .info-grid {
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .team-grid {
            grid-template-columns: 1fr 1fr; /* Single column on mobile */
        }
        
        .team-member {
            margin-bottom: 30px;
        }
        
        .contact-grid {
            grid-template-columns: 1fr; /* Single column on mobile */
            gap: 30px;
        }
        
        body.modal-open {
            position: fixed;
            width: 100%;
        }
            }
    </style>
</head>
<body>
    <div class="crosshair">
        <div class="vertical"></div>
        <div class="horizontal"></div>
        <div class="dot"></div>
      </div>
    <div class="container">
        <div class="left-half">
            <div class="title">TIDELANDS 2100</div>
            <div class="top-gradient"></div>
            <div class="bottom-gradient"></div>
            <div class="image-sequence" id="imageSequence">
                <!-- Placeholder images will be populated by JavaScript -->
                <img src="images/1.gif" alt="Tidelands frame 1" data-frame="1">
                <img src="images/2.gif" alt="Tidelands frame 2" data-frame="2">
                <img src="images/3.gif" alt="Tidelands frame 3" data-frame="3">
                <img src="images/4.gif" alt="Tidelands frame 4" data-frame="4">
                <img src="images/5.gif" alt="Tidelands frame 5" data-frame="5">
                <img src="images/6.gif" alt="Tidelands frame 6" data-frame="6">
                <img src="images/7.gif" alt="Tidelands frame 7" data-frame="7">
                <img src="images/8.gif" alt="Tidelands frame 8" data-frame="8">
                <img src="images/9.gif" alt="Tidelands frame 9" data-frame="9">
                <img src="images/10.gif" alt="Tidelands frame 10" data-frame="10">
                <img src="images/11.gif" alt="Tidelands frame 11" data-frame="11">
                <img src="images/12.gif" alt="Tidelands frame 12" data-frame="12">
                <img src="images/13.gif" alt="Tidelands frame 13" data-frame="13">
                <img src="images/14.gif" alt="Tidelands frame 14" data-frame="14">
                <img src="images/15.gif" alt="Tidelands frame 15" data-frame="15">
                <img src="images/16.gif" alt="Tidelands frame 16" data-frame="16">
                <img src="images/17.gif" alt="Tidelands frame 17" data-frame="17">
                <img src="images/18.gif" alt="Tidelands frame 18" data-frame="18">
                <img src="images/19.gif" alt="Tidelands frame 19" data-frame="19">
                <img src="images/20.gif" alt="Tidelands frame 20" data-frame="20">
            </div>
        </div>
        <div class="right-half">
            <div class="accordion" id="accordion">
                <div class="accordion-item" id="item1">
                    <div class="accordion-header">OVERVIEW</div>
                    <div class="accordion-content">
                        <div class="content-inner">
                            <p>TIDELANDS is an extended reality (XR) artwork that immerses audiences in a speculative climate future along Potter’s Pond, Rhode Island—a coastline projected to be underwater by century’s end. Set in 2100, the piece follows a day in the life of a coastal community that has reclaimed a landscape once abandoned after flooding, evacuation, and state withdrawal. The narrative unfolds during an annual sealife harvest festival—a civic ritual rooted in regional and Indigenous traditions, reconfigured through reciprocity with water, weather, and more-than-human life.<br><br>
                                <img src="images/overview.png" alt="SCUP Aquaculture"><br><br>
                                Through acts of gathering, cooking, and care, the rhythms of this floating village surface and take shape. Audiences move through interconnected sites: tidal greenhouses with salt-adapted crops, a wind-powered shellfish hatchery, a thriving fish co-op. Some are protopic extensions of current adaptive strategies; others emerge from the emotional logic of place—rituals of grief, memory, and reinvention. 
                                Built in Unity, TIDELANDS merges NOAA flood projections, 3D ecological scans, field-recorded soundscapes, site-specific architecture, and oral histories into an immersive environment rooted in real people and place. Growing from a multi-year collaboration with RI’s blue sector, it explores how XR can serve as both a storytelling medium and a civic tool for place-based co-creation of climate futures.<br><br>
                                How do we want to live, when we can no longer live as we do now? Rather than accept coastal abandonment as inevitable, TIDELANDS offers a counter-imaginary to coastal displacement: a vision of climate resilience where our local communities with deep ties to the shore adapt—and even thrive—in the face of rising seas.</p>
                        </div>
                    </div>
                </div>
                <div class="accordion-item" id="item2">
                    <div class="accordion-header">BACKGROUND</div>
                    <div class="accordion-content">
                        <div class="content-inner">
                            <p>SCUP Aquaculture (2022–2025) was a design and research collective investigating how ocean infrastructure might serve both ecological regeneration and the livelihoods of coastal communities. Operating in the fraught space between offshore wind development and traditional fisheries, SCUP proposed a socio-technical solution: co-habited aquaculture platforms occupying underutilized zones around wind turbines. Developed in collaboration with aquaculturists, fisheries scientists, and wind developers, the first prototype—a modular, low-cost system of oyster cages, mussel lines, and buoys—was designed to strengthen Rhode Island’s food resilience by enabling sustainable protein cultivation in open ocean environments.<br><br>
                                <img src="images/scup.png" alt="SCUP Aquaculture"><br><br>
                            But SCUP was never just a technical intervention—it was a relational one. Built through interviews, workshops, and long-term partnerships with local fishers, scientists, and policymakers, the project revealed both the potential and the profound constraints of implementing such solutions at scale. Corporate control of ocean leases, a fractured regulatory system, and rigid insurance and liability frameworks posed structural barriers that innovation alone couldn’t solve.<br><br>
                            These realities gave rise to Tidelands 2100—a deeper inquiry into the political, social, and economic conditions that must shift for projects like SCUP to truly take root. Where SCUP was a first-phase prototype, Tidelands 2100 is a generative framework—a co-created process for imagining coastal futures grounded not in top-down projections, but in the lived experiences, knowledge, and agency of the communities who call these coastlines home.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="accordion-item" id="item3">
                    <div class="accordion-header">VISION</div>
                    <div class="accordion-content">
                        <div class="content-inner">
                            <p>Based on NOAA and state-level climate projections, Potter’s Pond—an ecologically rich estuary and working waterfront in South Kingstown, RI—is expected to face up to nine feet of sea level rise over the next 75 years. This future is neither abstract nor benign. It is already reshaping a top-down narrative of coastal displacement and migration: redrawing shorelines, redefining insurance policies, and informing planning frameworks that determine who and what is worth saving.<br><br>
                                <img src="images/housing.png" alt="SCUP Aquaculture"><br><br>
                            These narratives of managed retreat too often ignore the lived knowledge, cultural histories, and ecological relationships that define place for coastal communities. For some, leaving is not simply a practical challenge; it is a loss of identity, practice, and way of life. It is erasure.<br><br>
                            Tidelands challenges this logic. It resists the flattening of adaptation into evacuation plans and policy briefings, and instead invites local residents to envision futures beyond displacement. Through interviews, co-writing sessions, and workshops, this project brings aquaculturists, fishers, chefs, scientists, and Indigenous stewards into the imagination of new civic ecologies—expansive futures that cultivate healthier ways of knowing and being with our human and more-than-human neighbors.<br><br>
                            By surfacing stories often excluded from formal planning processes, Tidelands enables a model of climate adaptation that is not reactive, but regenerative—rooted in relational knowledge and lived connection to a changing coast. Through the medium of XR, we aim to foster not just environmental resilience, but social transformation—where communities become agents in imagining and enacting their own futures.</p>
                        </div>
                    </div>
                </div>
                <div class="accordion-item" id="item4">
                    <div class="accordion-header">FIELD NOTES</div>
                    <div class="accordion-content">
                        <div class="content-inner">
                            <p>Check back for field notes!<br><br>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="bottom-bar">
        <button class="info-button" id="infoButton">i</button>
        <div class="divider"></div>
        <div class="timeline-container">
            <div class="timeline-progress" id="timelineProgress"></div>
        </div>
    </div>

    <div class="overlay" id="overlay">
        <div class="info-modal" id="infoModal">
            <div class="info-content">
                <div class="info-section">
                    <h2>TEAM</h2>
                    <div class="team-grid">
                        <!-- Row 1 -->
                        <div class="team-member">
                            <p><strong>Annie Chen</strong><br>Project Director</p>
                        </div>
                        <div class="team-member">
                            <p><strong>Zoe Lee</strong><br>Producer</p>
                        </div>
                        <div class="team-member">
                            <p><strong>Ellen Fritz</strong><br>XR Artist & Producer</p>
                        </div>
                        <!-- Row 2 -->
                        <div class="team-member">
                            <p><strong>Ram Charan</strong><br>Architectural Designer & Futurist</p>
                        </div>
                        <div class="team-member">
                            <p><strong>Ryan Lettieri</strong><br>Web Developer & Worldbuilder</p>
                        </div>
                        <div class="team-member">
                        </div>
                    </div>
                </div>
                
                <div class="info-section">
                    <div class="contact-divider"></div>
                    <div class="contact-grid">
                        <div class="contact-column">
                            <p>GENERAL INQUIRIES<br><a href="mailto:hello@beamstudio.earth">HELLO@BEAMSTUDIO.EARTH</a></p>
                        </div>
                        <div class="contact-column">
                            <p>INSTAGRAM<br><a href="https://www.instagram.com/beam.earth/" target="_blank">@BEAM.EARTH</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Updated script to fix title and info button visibility in mobile
document.addEventListener('DOMContentLoaded', function() {
    // Crosshair cursor
    const crosshair = document.querySelector('.crosshair');
    const vertical = document.querySelector('.vertical');
    const horizontal = document.querySelector('.horizontal');
    const dot = document.querySelector('.dot');

    document.addEventListener('mousemove', (e) => {
        const x = e.clientX;
        const y = e.clientY;

        vertical.style.left = `${x}px`;
        horizontal.style.top = `${y}px`;
        dot.style.left = `${x}px`;
        dot.style.top = `${y}px`;
    });
    
    // Handle mobile layout - move title to container for mobile
    function setupMobileLayout() {
        const isMobile = window.innerWidth <= 768;
        const titleElement = document.querySelector('.title');
        const leftHalf = document.querySelector('.left-half');
        const container = document.querySelector('.container');
        
        if (isMobile) {
            // Check if title is in left-half and move it to container
            if (titleElement.parentElement === leftHalf) {
                // Remove it from left-half
                leftHalf.removeChild(titleElement);
                // Add it to container as the first child
                container.insertBefore(titleElement, container.firstChild);
            }
            
            // Move info button to title if it's in bottom bar
            const infoButton = document.getElementById('infoButton');
            if (infoButton.parentElement && infoButton.parentElement.classList.contains('bottom-bar')) {
                titleElement.appendChild(infoButton);
            }
        } else {
            // Move title back to left-half for desktop
            if (titleElement.parentElement === container) {
                container.removeChild(titleElement);
                leftHalf.insertBefore(titleElement, leftHalf.firstChild);
            }
            
            // Move info button back to bottom bar
            const infoButton = document.getElementById('infoButton');
            const bottomBar = document.querySelector('.bottom-bar');
            
            if (infoButton.parentElement === titleElement) {
                bottomBar.insertBefore(infoButton, bottomBar.firstChild);
            }
        }
    }
    
    // Image sequence scrolling logic
    const imageSequence = document.getElementById('imageSequence');
    const images = imageSequence.querySelectorAll('img');
    const totalFrames = images.length;
    let currentFrame = 0;
    
    // Scroll control variables
    let lastScrollTime = 0;
    const scrollCooldown = 0; // milliseconds between allowed scroll actions
    
    // Timeline elements
    const timelineProgress = document.getElementById('timelineProgress');
    
    // Info modal elements
    const infoButton = document.getElementById('infoButton');
    const overlay = document.getElementById('overlay');
    const infoModal = document.getElementById('infoModal');
    
    // Show the first frame initially
    images[0].style.opacity = 1;
    
    // Update timeline based on current frame
    function updateTimeline() {
        const progressPercentage = (currentFrame / (totalFrames - 1)) * 100;
        timelineProgress.style.width = `${progressPercentage}%`;
    }
    
    // Handle scroll on left side to control image sequence
    document.querySelector('.left-half').addEventListener('wheel', function(e) {
        e.preventDefault();
        
        // Check if enough time has passed since last scroll
        const now = Date.now();
        if (now - lastScrollTime < scrollCooldown) {
            return; // Exit if scrolling too quickly
        }
        
        // Determine scroll direction, but use a threshold
        const scrollThreshold = 2; // Adjust based on testing
        
        // Only change frame if scroll amount exceeds threshold
        if (Math.abs(e.deltaY) >= scrollThreshold) {
            const direction = e.deltaY > 0 ? 1 : -1;
            
            // Calculate new frame, but prevent wrapping around
            let newFrame = currentFrame + direction;
            
            // Ensure we stay within bounds - don't loop
            if (newFrame >= 0 && newFrame < totalFrames) {
                // Hide current frame
                images[currentFrame].style.opacity = 0;
                
                // Update current frame
                currentFrame = newFrame;
                
                // Show new frame
                images[currentFrame].style.opacity = 1;
                
                // Update timeline
                updateTimeline();
                
                // Update last scroll time
                lastScrollTime = now;
            }
        }        
    });
    
    // Accordion functionality for desktop
    const accordion = document.getElementById('accordion');
    const accordionItems = document.querySelectorAll('.accordion-item');
    const accordionHeaders = document.querySelectorAll('.accordion-header');
    const headerHeight = 100; // Match this to the .accordion-header height in CSS
    const mobileHeaderHeight = 60; // Match this to the mobile .accordion-header height
    
    // Position the accordion items initially - stacked with no gaps
    function positionItemsDefault() {
        if (window.innerWidth > 768) { // Desktop
            accordionItems.forEach((item, i) => {
                item.style.transform = `translateY(${i * headerHeight}px)`;
                item.style.zIndex = `${accordionItems.length - i}`; // Higher items have higher z-index
                item.style.top = ''; // Clear any mobile styles
            });
        } else { // Mobile
            accordionItems.forEach((item, i) => {
                item.style.transform = 'none';
                item.style.top = `${i * mobileHeaderHeight}px`;
                item.style.zIndex = `${accordionItems.length - i}`;
            });
        }
    }
    
    // Position when an item is active - maintain stacking order at bottom
    function positionItemsWithActive(activeIndex) {
        if (window.innerWidth > 768) { // Desktop
            const viewportHeight = window.innerHeight - 50; // Adjust for bottom bar
            const itemsBelow = accordionItems.length - activeIndex - 1;
            const bottomStackHeight = itemsBelow * headerHeight;
            
            // Calculate the maximum space available for the content
            const maxContentHeight = viewportHeight - ((activeIndex + 1) * headerHeight) - bottomStackHeight;
            
            // Set the active content's max height
            const activeContent = accordionItems[activeIndex].querySelector('.accordion-content');
            activeContent.style.maxHeight = `${maxContentHeight}px`;
            
            accordionItems.forEach((item, i) => {
                item.style.top = ''; // Clear mobile styles
                
                if (i <= activeIndex) {
                    // Items before and including active stay at top
                    item.style.transform = `translateY(${i * headerHeight}px)`;
                } else {
                    // Items after active go to bottom
                    const bottomPos = viewportHeight - bottomStackHeight + ((i - activeIndex - 1) * headerHeight);
                    item.style.transform = `translateY(${bottomPos}px)`;
                }
            });
        } else { // Mobile
            // Constants for mobile layout
            const titleHeight = 50; // Height of the title bar
            const totalHeight = window.innerHeight - titleHeight; // Total available height
            const itemsCount = accordionItems.length;
            
            // Calculate how much space we need for all headers
            const allHeadersHeight = itemsCount * mobileHeaderHeight;
            
            // Determine how much space we can use for content
            // We need to ensure all headers fit on screen
            let contentMaxHeight;
            
            // If active is the first item, we have more space
            if (activeIndex === 0) {
                // We need room for active header + all other headers at bottom
                contentMaxHeight = totalHeight - mobileHeaderHeight - ((itemsCount - 1) * mobileHeaderHeight);
            } else {
                // We need room for headers above + active header + headers below
                contentMaxHeight = totalHeight - (activeIndex * mobileHeaderHeight) - mobileHeaderHeight - ((itemsCount - activeIndex - 1) * mobileHeaderHeight);
            }
            
            // Ensure we have at least minimal space for content
            contentMaxHeight = Math.max(contentMaxHeight, 50); // At least 50px for content
            
            // Set active content height
            const activeContent = accordionItems[activeIndex].querySelector('.accordion-content');
            activeContent.style.maxHeight = `${contentMaxHeight}px`;
            
            // Position all items
            accordionItems.forEach((item, i) => {
                item.style.transform = 'none'; // Clear desktop styles
                
                if (i < activeIndex) {
                    // Items before active stay at top in order
                    item.style.top = `${i * mobileHeaderHeight}px`;
                } else if (i === activeIndex) {
                    // Active item follows previous headers
                    item.style.top = `${activeIndex * mobileHeaderHeight}px`;
                } else {
                    // Items after active go below the content
                    // Start position = active header position + header height + content height
                    const startPosition = (activeIndex * mobileHeaderHeight) + mobileHeaderHeight + contentMaxHeight;
                    const positionFromStart = (i - activeIndex - 1) * mobileHeaderHeight;
                    item.style.top = `${startPosition + positionFromStart}px`;
                }
            });
        }
    }
    
    // Function to handle layout changes between mobile and desktop
    function handleLayoutChange() {
        setupMobileLayout(); // Handle title and info button positioning
        
        // Check if any item is active
        const activeIndex = Array.from(accordionItems).findIndex(item => item.classList.contains('active'));
        
        if (activeIndex >= 0) {
            positionItemsWithActive(activeIndex);
        } else {
            positionItemsDefault();
        }
    }
    
    // Initialize default positions
    setupMobileLayout(); // Initial setup for title
    positionItemsDefault();
    handleLayoutChange(); // Initial check for device type
    
    // Update the accordion header click handler
    accordionHeaders.forEach((header, index) => {
            header.addEventListener('click', function(e) {
                // Prevent default behavior
                e.preventDefault();
                
                const item = this.parentElement;
                const wasActive = item.classList.contains('active');
                
                // Close all items first
                accordionItems.forEach(accItem => {
                    accItem.classList.remove('active');
                    accItem.querySelector('.accordion-content').style.maxHeight = '0';
                });
                
                // If clicked item wasn't active before, open it
                if (!wasActive) {
                    item.classList.add('active');
                    positionItemsWithActive(index);
                    
                    // In mobile view, scroll to make sure the header is visible
                    if (window.innerWidth <= 768) {
                        // Use setTimeout to let the DOM update first
                        setTimeout(() => {
                            // Scroll with offset for the fixed header
                            const headerTop = header.getBoundingClientRect().top;
                            const titleHeight = 50; // Height of your title bar
                            window.scrollTo({
                                top: window.pageYOffset + headerTop - titleHeight,
                                behavior: 'smooth'
                            });
                        }, 100);
                    }
                } else {
                    // Return to default positions
                    positionItemsDefault();
                }
            });
        });
    
    // Info button toggle
    let infoOpen = false;
    
    infoButton.addEventListener('click', function() {
        if (!infoOpen) {
            // Open info modal
            infoButton.innerHTML = "X";
            infoButton.classList.add('active'); // Add active class
            overlay.style.display = "block";
            infoModal.style.display = "block";
            infoOpen = true;
            document.body.classList.add('modal-open'); 
        } else {
            // Close info modal
            infoButton.innerHTML = "i";
            infoButton.classList.remove('active'); // Remove active class
            overlay.style.display = "none";
            infoModal.style.display = "none";
            infoOpen = false;
            document.body.classList.remove('modal-open');
        }
    });
    
    // Close modal when clicking overlay (but not when clicking on the modal itself)
    overlay.addEventListener('click', function(e) {
        if (e.target === overlay) {
            infoButton.innerHTML = "i";
            infoButton.classList.remove('active'); // Remove active class
            overlay.style.display = "none";
            infoModal.style.display = "none";
            infoOpen = false;
            document.body.classList.remove('modal-open');
        }
    });
    
    // Handle window resize
    window.addEventListener('resize', function() {
        handleLayoutChange();
    });
    
    // Auto-open the Overview section (first accordion item)
    const firstItem = accordionItems[0];
    firstItem.classList.add('active');
    
    // Position items with first item active
    setTimeout(() => {
        positionItemsWithActive(0);
    }, 100);
});
    </script>
</body>
</html>